<%- include("../partials/header") %>

<head>
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />

</head>


<style>
    .swiper-container {
        width: 100%;
        height: 100%;
    }
    .swiper-slide {
        text-align: center;
        font-size: 18px;
        background: #fff;

        /* Center slide text vertically */
        display: -webkit-box;
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -webkit-box-pack: center;
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;
        -webkit-box-align: center;
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
    }
    .swiper-button-next,
    .swiper-button-prev {
        color: #fff;
    }
</style>


<style>
    .home-slider {
        overflow: hidden; /* Hide any content that overflows the container */
    }

    .swiper-container {
        max-width: 100%; /* Limit the maximum width to 100% of the parent container */
        overflow: hidden; /* Hide any content that overflows the container */
    }

    .swiper-wrapper {
        display: flex; /* Ensure the wrapper items are displayed in a row */
    }

    .swiper-slide {
        width: 100%; /* Make each slide take up the full width of the container */
        box-sizing: border-box; /* Include padding and border in the element's total width and height */
    }
</style>


    <main class="main">
      
        <section class="home-slider position-relative pt-70 pb-50">
            <div class="swiper-container">
                <div class="swiper-wrapper">
                    <% for (let i = 0; i < banner.length; i++) { %>
                        <div class="swiper-slide">
                            <div class="single-hero-slider single-animation-wrap">
                                <div class="container">
                                    <div class="row align-items-center slider-animated-1">
                                        <div class="col-lg-12">
                                            <div class="single-slider-img single-slider-img-1">
                                                <!-- Place your banner image here -->
                                                <img class="animated slider-1-1" src="/uploads/product-images/<%= banner[i].image %>" alt="" style="width: 100%; height: auto;">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    <% } %>
                </div>
                <div class="swiper-pagination"></div>
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>
            </div>
        </section>
        

        <section class="popular-categories section-padding mt-15 mb-25">
            <div class="container wow fadeIn animated">
                <h3 class="section-title mb-20"><span>Popular</span> Categories</h3>
                <div class="carausel-6-columns-cover position-relative">
                    <div class="slider-arrow slider-arrow-2 carausel-6-columns-arrow" id="carausel-6-columns-arrows">
                    </div>
                    <div class="carausel-6-columns" id="carausel-6-columns">
                        <div class="card-1">
                            <figure class=" img-hover-scale overflow-hidden">
                                <a href="products-grid-right.html"><img
                                        src="user-assets/imgs/category/category-gaming.webp" alt=""></a>
                            </figure>
                            <!-- <h5><a href="products-grid-right.html">T-Shirt</a></h5> -->
                        </div>
                        <div class="card-1">
                            <figure class=" img-hover-scale overflow-hidden">
                                <a href="products-grid-right.html"> <img
                                        src="user-assets/imgs/category/category-contentCreation.webp" alt=""></a>
                            </figure>
                            <!-- <h5><a href="products-grid-right.html">Bags</a></h5> -->
                        </div>
                        <div class="card-1">
                            <figure class=" img-hover-scale overflow-hidden">
                                <a href="products-grid-right.html"><img
                                        src="user-assets/imgs/category/category-entertainment.webp" alt=""></a>
                            </figure>
                            <!-- <h5><a href="products-grid-right.html">Sandan</a></h5> -->
                        </div>
                        <div class="card-1">
                            <figure class=" img-hover-scale overflow-hidden">
                                <a href="products-grid-right.html"><img
                                        src="user-assets/imgs/category/category-everydayUse.webp" alt=""></a>
                            </figure>
                            <!-- <h5><a href="products-grid-right.html">Scarf Cap</a></h5> -->
                        </div>
                        <div class="card-1">
                            <figure class=" img-hover-scale overflow-hidden">
                                <a href="products-grid-right.html"><img
                                        src="user-assets/imgs/category/category-officeUse.webp" alt=""></a>
                            </figure>
                            <!-- <h5><a href="products-grid-right.html">Shoes</a></h5> -->
                        </div>
                        <div class="card-1">
                            <figure class=" img-hover-scale overflow-hidden">
                                <a href="products-grid-right.html"><img
                                        src="user-assets/imgs/category/category-studies.webp" alt=""></a>
                            </figure>
                            <!-- <h5><a href="products-grid-right.html">Pillowcase</a></h5> -->

                        </div>
                    </div>
                </div>
        </section>






        <!-- Featured Brands -->







        <section class="section-padding">
            <div class="container">
                <h3 class="section-title mb-20 wow fadeIn animated"><span>Featured</span> Brands</h3>
                <div class="carausel-6-columns-cover position-relative wow fadeIn animated">
                    <div class="slider-arrow slider-arrow-2 carausel-6-columns-arrow" id="carausel-6-columns-3-arrows">
                    </div>
                    <div class="carausel-6-columns text-center" id="carausel-6-columns-3">



                        <% for (let i=0; i < data.length; i++) { %>
                            <div class="brand-logo">
                                <img class="img-grey-hover" src="/uploads/brand-images/<%= data[i].brandImage %>"
                                    alt="">
                            </div>
                            <% } %>




                    </div>
                </div>
            </div>
        </section>






        <!-- Featured, Popular, Newly Added ---Product List -->





        <section class="product-tabs section-padding position-relative wow fadeIn animated">
            <div class="bg-square"></div>
            <div class="container">
                <div class="tab-header">
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                   
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="nav-tab-three" data-bs-toggle="tab" data-bs-target="#tab-three"
                                type="button" role="tab" aria-controls="tab-three" aria-selected="false">New
                                added</button>
                        </li>
                    </ul>
                    <a href="/shop" class="view-more d-none d-md-flex">View More<i
                            class="fi-rs-angle-double-small-right"></i></a>
                </div>
                <!--End nav-tabs-->
                <div class="tab-content wow fadeIn animated" id="myTabContent">
                    <div class="tab-pane fade show active" id="tab-one" role="tabpanel" aria-labelledby="tab-one">
                        <div class="row product-grid-4">


                            <% for (let i=0; i < products.length; i++) { %>

                                <div class="col-lg-3 col-md-4 col-12 col-sm-6">
                                    <div class="product-cart-wrap mb-30">
                                        <div class="product-img-action-wrap">
                                            <div class="product-img product-img-zoom">
                                                <a href="/productDetails?id=<%=products[i].id%>">
                                                    <img class="default-img"
                                                        src="/uploads/product-images/<%=products[i].productImage[0]%>" alt="">
                                                    
                                                </a>
                                            </div>
                                            <div class="product-action-1">
                                               
                                                <a aria-label="Add To Wishlist" class="action-btn hover-up" href="javascript:void(0);" onclick="addToWishlist('<%= products[i]._id %>')"><i class="fi-rs-heart"></i></a>
                                            </div>
                                            <div class="product-badges product-badges-position product-badges-mrg">
                                                <span class="hot">New</span>
                                            </div>
                                        </div>
                                        <div class="product-content-wrap">
                                            <div class="product-brand">
                                                <a href="products-grid-right.html"><%-products[i].brand%></a>
                                            </div>
                                            <h2><a href="products-product-right.html"><%-products[i].productName%></a></h2>
                                            <!-- <div class="rating-result" title="90%">
                                                <span>
                                                    <span>90%</span>
                                                </span>
                                            </div> -->
                                            <div class="product-price">
                                                <span>₹<%-products[i].salePrice.toLocaleString('en-IN')%> </span>
                                                <span class="old-price">₹<%-products[i].regularPrice.toLocaleString('en-IN')%></span>
                                            </div>
                                            <div class="product-action-1 show">
                                                <a aria-label="Add To Cart" onclick="addToCart('<%=products[i]._id%>')" class="action-btn hover-up" ><i class="fi-rs-shopping-bag-add"></i></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <% } %>


                        </div>
                    </div>
                </div>
            </div>
            <!--End product-grid-4-->
            </div>
            <!--En tab three (New added)-->
            </div>
            <!--End tab-content-->
            </div>
        </section>

        <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var swiper = new Swiper('.swiper-container', {
            loop: true,
            autoplay: {
                delay: 5000, // Time between slides in milliseconds
                disableOnInteraction: false, // Allows manual navigation without disabling autoplay
            },
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
            speed: 3000, // Slow down the transition speed to 3000ms (3 seconds)
            effect: 'creative',
            creativeEffect: {
                prev: {
                    // Scale the previous slide to 80% and translate it by 50px
                    translate: [0, 0, -200],
                    scale: 0.8,
                },
                next: {
                    // Translate the next slide by 100%
                    translate: ['100%', 0, 0],
                },
            },
        });
    });
</script>

        
<script>
    function addToCart(prodId) {

        var quantity = 1;
        $.ajax({
            url: `/addToCart?id=${prodId}`,
            method: "post",
            data: {
                quantity: quantity
            },
            success: (res) => {
                if (res.status === true) {

                    Swal.fire({
                        title: 'Added to Cart!',
                        text: 'Continue Shopping',
                        icon: 'success',
                        timer: 2000,
                        showConfirmButton: false
                    })
                } else if (res.status === "Out of stock") {
                    Swal.fire({
                        title: 'Stock!!',
                        text: "The product is out of stock",
                        icon: 'error', // Corrected from 'fail' to 'error'
                        timer: 2000,
                    })
                } else {
                    Swal.fire({
                        title: 'You need to Login first',
                        text: 'Continue Shopping',
                        icon: 'warning',
                        timer: 2000,
                        showConfirmButton: false
                    }).then(() => { window.location.href = '/login' });
                }
            },
            error: (err) => {
                console.error(err, "hello");
                res.alert("error occured")
            }
        });
    }

</script>



<script>

    function addToWishlist(productId){
        $.ajax({
            url : "/addToWishlist",
            method : "post",
            data : {
                productId : productId
            },
            success : (response)=>{
                if(response.status == true){
                    Swal.fire({
                                    title: 'Added to Wishlist!',
                                    text: 'Continue Shopping',
                                    icon: 'success',
                                    timer: 2000,
                                    showConfirmButton: false
                                })
                }else if(response.status == false){
                    Swal.fire({
                                    title: 'You need to Login first',
                                    text: 'Continue Shopping',
                                    icon: 'warning',
                                    timer: 2000,
                                    showConfirmButton: false
                                }).then(() => { window.location.href = '/login' });
                }
            }
        })
        return false;
    }
    
    
    function getCurrentPageFromURL(element) {
        
        const url = window.location.href;
        const match = url.match(/page=(\d+)/);
    
        if (match && match[1]) {
            return parseInt(match[1], 10);
        }
    
        return 1;
    }
    
    
        
    </script>
    

        <script>
            var swiper = new Swiper('.swiper-container', {
                slidesPerView: 1,
                spaceBetween: 10,
                navigation: {
                    nextEl: '.swiper-button-next',
                    prevEl: '.swiper-button-prev',
                },
                pagination: {
                    el: '.swiper-pagination',
                    clickable: true,
                },
            });
        </script>


        <%- include("../partials/footer") %>